{
	"$schema": "https://json-schema.org/draft/2020-12/schema",
	"oneOf": [
		{
			"type": "object",
			"properties": {
				"$schema": {
					"type": "string",
					"format": "uri",
					"description": "Optional JSON Schema reference URL."
				},
				"packageId": {
					"type": "string",
					"description": "Task identifier in winget-pkgs."
				},
				"args": {
					"type": "array",
					"items": {
						"type": "string"
					}
				},
				"releaseNotes": {
					"type": "string",
					"description": "Optional release notes text. Can contain {version} placeholder."
				},
				"replace": {
					"default": false,
					"description": "Replace latest version with new version.",
					"type": "boolean"
				},
				"versionRemove": {
					"type": "string",
					"description": "Substring(s) to strip after auto-leading 'v' removal."
				},
				"strategy": {
					"type": "string",
					"const": "github-release"
				},
				"github": {
					"type": "object",
					"properties": {
						"owner": {
							"type": "string"
						},
						"repo": {
							"type": "string"
						},
						"preRelease": {
							"default": false,
							"type": "boolean"
						},
						"fetchUrlsFromApi": {
							"default": false,
							"type": "boolean",
							"description": "Fetch asset download URLs via the GitHub Releases API instead of relying on templates."
						},
						"tagFilter": {
							"type": "string"
						},
						"fetchLatest": {
							"default": false,
							"type": "boolean"
						}
					},
					"required": ["owner", "repo"],
					"additionalProperties": false
				},
				"urls": {
					"minItems": 1,
					"type": "array",
					"items": {
						"type": "string"
					},
					"description": "Template or literal URLs with {version} placeholder."
				}
			},
			"required": ["packageId", "strategy", "github"],
			"additionalProperties": false
		},
		{
			"type": "object",
			"properties": {
				"$schema": {
					"type": "string",
					"format": "uri",
					"description": "Optional JSON Schema reference URL."
				},
				"packageId": {
					"type": "string",
					"description": "Task identifier in winget-pkgs."
				},
				"args": {
					"type": "array",
					"items": {
						"type": "string"
					}
				},
				"releaseNotes": {
					"type": "string",
					"description": "Optional release notes text. Can contain {version} placeholder."
				},
				"replace": {
					"default": false,
					"description": "Replace latest version with new version.",
					"type": "boolean"
				},
				"versionRemove": {
					"type": "string",
					"description": "Substring(s) to strip after auto-leading 'v' removal."
				},
				"strategy": {
					"type": "string",
					"const": "page-match"
				},
				"pageMatch": {
					"type": "object",
					"properties": {
						"url": {
							"type": "string",
							"format": "uri"
						},
						"regex": {
							"type": "string"
						}
					},
					"required": ["url", "regex"],
					"additionalProperties": false
				},
				"urls": {
					"minItems": 1,
					"type": "array",
					"items": {
						"type": "string"
					},
					"description": "Template or literal URLs with {version} placeholder."
				}
			},
			"required": ["packageId", "strategy", "pageMatch", "urls"],
			"additionalProperties": false
		},
		{
			"type": "object",
			"properties": {
				"$schema": {
					"type": "string",
					"format": "uri",
					"description": "Optional JSON Schema reference URL."
				},
				"packageId": {
					"type": "string",
					"description": "Task identifier in winget-pkgs."
				},
				"args": {
					"type": "array",
					"items": {
						"type": "string"
					}
				},
				"releaseNotes": {
					"type": "string",
					"description": "Optional release notes text. Can contain {version} placeholder."
				},
				"replace": {
					"default": false,
					"description": "Replace latest version with new version.",
					"type": "boolean"
				},
				"versionRemove": {
					"type": "string",
					"description": "Substring(s) to strip after auto-leading 'v' removal."
				},
				"strategy": {
					"type": "string",
					"const": "redirect-match"
				},
				"redirectMatch": {
					"type": "object",
					"properties": {
						"url": {
							"type": "string",
							"format": "uri"
						},
						"regex": {
							"type": "string"
						},
						"method": {
							"default": "head",
							"type": "string",
							"enum": ["head", "get"]
						}
					},
					"required": ["url", "regex"],
					"additionalProperties": false
				},
				"urls": {
					"minItems": 1,
					"type": "array",
					"items": {
						"type": "string"
					},
					"description": "Template or literal URLs with {version} placeholder."
				}
			},
			"required": ["packageId", "strategy", "redirectMatch"],
			"additionalProperties": false
		},
		{
			"type": "object",
			"properties": {
				"$schema": {
					"type": "string",
					"format": "uri",
					"description": "Optional JSON Schema reference URL."
				},
				"packageId": {
					"type": "string",
					"description": "Task identifier in winget-pkgs."
				},
				"args": {
					"type": "array",
					"items": {
						"type": "string"
					}
				},
				"releaseNotes": {
					"type": "string",
					"description": "Optional release notes text. Can contain {version} placeholder."
				},
				"replace": {
					"default": false,
					"description": "Replace latest version with new version.",
					"type": "boolean"
				},
				"versionRemove": {
					"type": "string",
					"description": "Substring(s) to strip after auto-leading 'v' removal."
				},
				"strategy": {
					"type": "string",
					"const": "electron-builder"
				},
				"electronBuilder": {
					"type": "object",
					"properties": {
						"url": {
							"type": "string",
							"format": "uri",
							"description": "Direct YAML URL (latest.yml, beta.yml, etc.)."
						}
					},
					"required": ["url"],
					"additionalProperties": false
				},
				"urls": {
					"minItems": 1,
					"type": "array",
					"items": {
						"type": "string"
					},
					"description": "Template or literal URLs with {version} placeholder."
				}
			},
			"required": ["packageId", "strategy", "electronBuilder", "urls"],
			"additionalProperties": false
		},
		{
			"type": "object",
			"properties": {
				"$schema": {
					"type": "string",
					"format": "uri",
					"description": "Optional JSON Schema reference URL."
				},
				"packageId": {
					"type": "string",
					"description": "Task identifier in winget-pkgs."
				},
				"args": {
					"type": "array",
					"items": {
						"type": "string"
					}
				},
				"releaseNotes": {
					"type": "string",
					"description": "Optional release notes text. Can contain {version} placeholder."
				},
				"replace": {
					"default": false,
					"description": "Replace latest version with new version.",
					"type": "boolean"
				},
				"versionRemove": {
					"type": "string",
					"description": "Substring(s) to strip after auto-leading 'v' removal."
				},
				"strategy": {
					"type": "string",
					"const": "json"
				},
				"json": {
					"type": "object",
					"properties": {
						"url": {
							"type": "string",
							"format": "uri",
							"description": "Endpoint returning JSON."
						},
						"path": {
							"type": "string",
							"description": "Dot-separated path to string value (arrays use numeric indexes)."
						}
					},
					"required": ["url", "path"],
					"additionalProperties": false
				},
				"urls": {
					"minItems": 1,
					"type": "array",
					"items": {
						"type": "string"
					},
					"description": "Template or literal URLs with {version} placeholder."
				}
			},
			"required": ["packageId", "strategy", "json", "urls"],
			"additionalProperties": false
		},
		{
			"type": "object",
			"properties": {
				"$schema": {
					"type": "string",
					"format": "uri",
					"description": "Optional JSON Schema reference URL."
				},
				"packageId": {
					"type": "string",
					"description": "Task identifier in winget-pkgs."
				},
				"args": {
					"type": "array",
					"items": {
						"type": "string"
					}
				},
				"releaseNotes": {
					"type": "string",
					"description": "Optional release notes text. Can contain {version} placeholder."
				},
				"replace": {
					"default": false,
					"description": "Replace latest version with new version.",
					"type": "boolean"
				},
				"versionRemove": {
					"type": "string",
					"description": "Substring(s) to strip after auto-leading 'v' removal."
				},
				"strategy": {
					"type": "string",
					"const": "yaml"
				},
				"yaml": {
					"type": "object",
					"properties": {
						"url": {
							"type": "string",
							"format": "uri",
							"description": "Endpoint returning YAML."
						},
						"path": {
							"type": "string",
							"description": "Dot-separated path to string value (arrays use numeric indexes)."
						}
					},
					"required": ["url", "path"],
					"additionalProperties": false
				},
				"urls": {
					"minItems": 1,
					"type": "array",
					"items": {
						"type": "string"
					},
					"description": "Template or literal URLs with {version} placeholder."
				}
			},
			"required": ["packageId", "strategy", "yaml", "urls"],
			"additionalProperties": false
		}
	]
}
